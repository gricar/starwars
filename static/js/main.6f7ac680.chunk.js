(this["webpackJsonpstarwars-planets"]=this["webpackJsonpstarwars-planets"]||[]).push([[0],{11:function(e,t,a){e.exports=a(17)},17:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(9),u=a.n(l),c=a(10),o=a(2),i=a(3),m=a(1),s=Object(n.createContext)();var d=function(){var e=Object(n.useContext)(s),t=e.filterByNumericValues,a=e.setFilterByNumericValues,l=Object(n.useState)({column:"population",comparison:"maior que",value:0}),u=Object(m.a)(l,2),d=u[0],p=u[1],f=function(e){var t=e.target,a=t.name,n=t.value;p(Object(i.a)(Object(i.a)({},d),{},Object(o.a)({},a,n)))};return r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"column"},"Colunas",r.a.createElement("select",{"data-testid":"column-filter",name:"column",id:"column",value:d.column,onChange:f},r.a.createElement("option",{value:"population"},"population"),r.a.createElement("option",{value:"orbital_period"},"orbital_period"),r.a.createElement("option",{value:"diameter"},"diameter"),r.a.createElement("option",{value:"rotation_period"},"rotation_period"),r.a.createElement("option",{value:"surface_water"},"surface_water"))),r.a.createElement("label",{htmlFor:"comparison"},"Operador",r.a.createElement("select",{"data-testid":"comparison-filter",name:"comparison",id:"comparison",value:d.comparison,onChange:f},r.a.createElement("option",{value:"maior que"},"maior que"),r.a.createElement("option",{value:"menor que"},"menor que"),r.a.createElement("option",{value:"igual a"},"igual a"))),r.a.createElement("input",{"data-testid":"value-filter",type:"number",name:"value",value:d.value,onChange:f}),r.a.createElement("button",{type:"button","data-testid":"button-filter",onClick:function(){a([].concat(Object(c.a)(t),[d])),function(){var e=document.querySelector("#column").options;Array.from(e).forEach((function(e){e.value===d.column&&e.remove()}))}()}},"Filtrar"))};var p=function(){var e=Object(n.useContext)(s),t=e.data,a=e.setFilteredPlanetsList,l=e.setHasFilter,u=Object(n.useState)({name:""}),c=Object(m.a)(u,2),o=c[0],i=c[1];return Object(n.useEffect)((function(){var e=t.filter((function(e){return e.name.includes(o.name)}));a(e),o.name?l(!0):l(!1)}),[o.name,t,a,l]),r.a.createElement("div",null,r.a.createElement("input",{type:"text","data-testid":"name-filter",value:o.name,onChange:function(e){var t=e.target;return i({name:t.value})}}))};var f=function(){var e=Object(n.useContext)(s),t=e.data,a=e.filterByNumericValues,l=e.setFilterByNumericValues,u=e.setFilteredPlanetsList,c=function(e){var t=document.querySelector("#column"),a=document.createElement("option");a.value=e,a.innerHTML=e,t.appendChild(a)};return r.a.createElement("div",null,a.map((function(e,n){var o=e.column,i=e.comparison,m=e.value;return r.a.createElement("div",{key:n,"data-testid":"filter"},r.a.createElement("p",null,"".concat(o," ").concat(i," ").concat(m)),r.a.createElement("button",{type:"button",onClick:function(){return function(e){var n=a.filter((function(t){return t!==e}));u(t),l(n),c(e.column)}(e)}},"X"))})),r.a.createElement("button",{type:"button","data-testid":"button-remove-filters",onClick:function(){u(t),l([]),a.forEach((function(e){return c(e.column)}))}},"Remover filtros"))};var v=function(){var e=Object(n.useContext)(s),t=e.order,a=e.setOrder,l=e.filteredPlanetsList,u=e.setFilteredPlanetsList,c=e.setHasFilter,m=function(e){var n=e.target,r=n.name,l=n.value;a(Object(i.a)(Object(i.a)({},t),{},Object(o.a)({},r,l)))};return Object(n.useEffect)((function(){}),[]),r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"column"},"Ordenar",r.a.createElement("select",{"data-testid":"column-sort",name:"column",id:"column",value:t.column,onChange:m},r.a.createElement("option",{value:"population"},"population"),r.a.createElement("option",{value:"orbital_period"},"orbital_period"),r.a.createElement("option",{value:"diameter"},"diameter"),r.a.createElement("option",{value:"rotation_period"},"rotation_period"),r.a.createElement("option",{value:"surface_water"},"surface_water"))),r.a.createElement("label",{htmlFor:"ASC"},r.a.createElement("input",{"data-testid":"column-sort-input-asc",type:"radio",name:"sort",id:"ASC",value:"ASC",onChange:m}),"Ascendente"),r.a.createElement("label",{htmlFor:"DESC"},r.a.createElement("input",{"data-testid":"column-sort-input-desc",type:"radio",name:"sort",id:"DESC",value:"DESC",onChange:m}),"Descendente"),r.a.createElement("button",{type:"button","data-testid":"column-sort-button",onClick:function(){var e=t.column,a=t.sort;if("ASC"===a){var n=l.sort((function(t,a){return a[e]-t[e]}));u(n),c(!0)}else if("DESC"===a){var r=l.sort((function(t,a){return t[e]-a[e]}));u(r),c(!0)}}},"Ordenar"))};var E=function(){return r.a.createElement("div",null,r.a.createElement(p,null),r.a.createElement(d,null),r.a.createElement(f,null),r.a.createElement(v,null))};var b=function(){var e=Object(n.useContext)(s),t=e.data,a=e.filteredPlanetsList,l=e.hasFilter,u=function(e){return e.map((function(e,t){var a=e.name,n=e.rotation_period,l=e.orbital_period,u=e.diameter,c=e.climate,o=e.gravity,i=e.terrain,m=e.surface_water,s=e.population,d=e.films,p=e.created,f=e.edited,v=e.url;return r.a.createElement("tr",{key:t},r.a.createElement("td",null,a),r.a.createElement("td",null,n),r.a.createElement("td",null,l),r.a.createElement("td",null,u),r.a.createElement("td",null,c),r.a.createElement("td",null,o),r.a.createElement("td",null,i),r.a.createElement("td",null,m),r.a.createElement("td",null,s),r.a.createElement("td",null,d),r.a.createElement("td",null,p),r.a.createElement("td",null,f),r.a.createElement("td",null,v))}))};return r.a.createElement("div",null,r.a.createElement("table",null,r.a.createElement("caption",null,"Starwars planets"),r.a.createElement("thead",null,r.a.createElement("tr",null,t.length&&Object.keys(t[0]).filter((function(e){return"residents"!==e})).map((function(e,t){return r.a.createElement("th",{key:t},e)})))),r.a.createElement("tbody",null,u(l?a:t))))},O=a(4),j=a.n(O),h=a(7),C=function(){var e=Object(h.a)(j.a.mark((function e(){var t,a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://swapi-trybe.herokuapp.com/api/planets/");case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,n=a.results,e.abrupt("return",n);case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();var y=function(e){var t=e.children,a=Object(n.useState)([]),l=Object(m.a)(a,2),u=l[0],c=l[1],o=Object(n.useState)([]),i=Object(m.a)(o,2),d=i[0],p=i[1],f=Object(n.useState)(!1),v=Object(m.a)(f,2),E=v[0],b=v[1],O=Object(n.useState)([]),y=Object(m.a)(O,2),S=y[0],F=y[1],g=Object(n.useState)({column:"population",sort:"ASC"}),k=Object(m.a)(g,2),w=k[0],_=k[1];Object(n.useEffect)((function(){(function(){var e=Object(h.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[c]),Object(n.useEffect)((function(){S.forEach((function(e){var t=e.column,a=e.comparison,n=e.value;switch(a){case"maior que":p(d.filter((function(e){return Number(e[t])>Number(n)}))),b(!0);break;case"menor que":p(d.filter((function(e){return Number(e[t])<Number(n)}))),b(!0);break;case"igual a":p(d.filter((function(e){return Number(e[t])===Number(n)}))),b(!0);break;default:b(!1)}}))}),[S]);var x={data:u,setData:c,filteredPlanetsList:d,setFilteredPlanetsList:p,hasFilter:E,setHasFilter:b,filterByNumericValues:S,setFilterByNumericValues:F,order:w,setOrder:_};return r.a.createElement(s.Provider,{value:x},t)};var S=function(){return r.a.createElement(y,null,r.a.createElement(E,null),r.a.createElement(b,null))};u.a.render(r.a.createElement(S,null),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.6f7ac680.chunk.js.map